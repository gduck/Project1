
// javascript 

$(document).ready(function() {


  // disabled already selected languages from the list
  var removeAllDisabled = function() {
    $("select[class='lang'] option").map(function() {
      $(this).removeAttr("disabled", "disabled");
    });
  }

  var addDisabled = function(value) {
    // doesn't work on the dynamic select list with class=lang ??
    $("select[class='lang'] option[value="+value+"]")
      .attr("disabled", "disabled")
  }

  // change the text of which first language is selected
  $("#user_first_language").change(function() {
    $("#native-lang").html($("#user_first_language option:selected").text());
  });

  // must change the list if either drop down box changes
  $(".lang").on('focus', function(e) {
    e.preventDefault();
    console.log("focus function called");
    var nativeLangID = parseInt($("#user_first_language option:selected").val());
    // need to return an array of values
    var languageIDs = $('#other-lang td').map(function() {
      return $(this).attr("data-langid");
    }).get();
    console.log(languageIDs);

    removeAllDisabled();
    addDisabled(nativeLangID);
    for (i = 0; i < languageIDs.length; i++) {
      addDisabled(languageIDs[i]);
    };
  });


});

